<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Ayya Says – Akka Knows</title>
    <link rel="stylesheet" href="../../../project-001/css/chat_ui/chat_ui.css">
    <link rel="stylesheet" href="../../css/globle/globle.css">
    <link
            href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap"
            rel="stylesheet"
    >
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        /* -----------------------------------------
           Desktop: hide that giant sidebar avatar
        ----------------------------------------- */
        @media (min-width: 769px) {
            .sidebar .avatar { display: none; }
        }

        /* -----------------------------
           Mobile-specific styles
        ----------------------------- */
        @media (max-width: 768px) {
            /* body + app container */
            body {
                margin: 0;
                overflow: hidden;
            }
            .mobile-header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                padding: 0 15px;
                background: #fff;
                border-bottom: 1px solid #eee;
                height: 60px;
                position: fixed;
                top: 0; left: 0; right: 0;
                z-index: 1001;
            }
            .container {
                display: flex;
                flex-direction: column;
                height: calc(100vh - 60px);
                margin-top: 60px;
                overflow: hidden;
            }

            /* Slide-in sidebar: scrollable now */
            .sidebar {
                display: none;
            }
            .sidebar.active {
                display: flex;
                flex-direction: column;
                position: fixed;
                top: 0; left: 0;
                height: 100%;
                width: 280px;
                background: #fff;
                box-shadow: 2px 0 10px rgba(0,0,0,0.1);
                padding-top: 10px;
                z-index: 1000;
                overflow-y: auto;               /* ← allow scrolling */
                -webkit-overflow-scrolling: touch;
            }
            .sidebar-close {
                position: absolute;
                top: 10px; right: 10px;
                font-size: 24px;
                background: none;
                border: none;
                cursor: pointer;
            }

            /* Chat area fills remaining space */
            .chat-area {
                flex: 1;
                position: relative;
                overflow: hidden;
            }

            /* pin the input bar to the bottom of the viewport */
            .chat-input {
                position: fixed;
                bottom: 0; left: 0; right: 0;
                display: flex;
                align-items: center;
                padding: 10px 15px;
                background: #fff;
                box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
                z-index: 1002;
            }
            /* give the messages area a bottom-padding equal to the input bar's height */
            .chat-messages {
                height: 100%;
                overflow-y: auto;
                padding: 15px;
                padding-bottom: 80px;           /* ← leave room for the fixed input */
                background-color: #f8f8f8;
            }
            .chat-input input {
                flex: 1;
                border-radius: 20px;
                padding: 10px 15px;
                border: 1px solid #ccc;
            }
            .send-btn {
                margin-left: 10px;
                width: 40px; height: 40px;
                border-radius: 50%;
                border: none;
                display: flex;
                align-items: center;
                justify-content: center;
                background-color: #6488a7;
                color: white;
                font-size: 18px;
            }

            /* overlay behind menu */
            .overlay {
                position: fixed;
                top: 0; left: 0;
                width: 100%; height: 100%;
                background: rgba(0,0,0,0.5);
                display: none;
                z-index: 999;
            }
            .overlay.active {
                display: block;
            }
        }
    </style>
</head>

<body>
<!-- MOBILE HEADER -->
<div class="mobile-header" id="mobile-header">
    <div class="mobile-logo">
        <img src="../../assests/upper_logo.png.png" alt="Logo" style="height:40px">
    </div>
    <button id="mobile-menu-button" aria-label="Open menu">
      <span style="display:block;width:24px;height:2px;background:#333;position:relative;">
        <span style="position:absolute; top:-6px; width:24px; height:2px; background:#333;"></span>
        <span style="position:absolute; bottom:-6px; width:24px; height:2px; background:#333;"></span>
      </span>
    </button>
</div>

<div class="container">
    <!-- SIDEBAR -->
    <aside class="sidebar" id="sidebar">
        <button class="sidebar-close" id="sidebar-close">×</button>
        <div class="logo-section">
            <img src="../../assests/upper_logo.png.png" alt="Logo" class="logo">
        </div>
        <button id="new-chat-btn" class="new-chat-btn">New Chat +</button>
        <div class="avatar">
            <img src="avatar.png" alt="Avatar" id="avatar-img">
        </div>
        <button class="profile-btn">
            <img src="profile.png" alt="Profile" class="profile-pic">
            <span><a href="../../html/Profile_CardPage/Profile_CardPage.html">My Profile</a></span>
        </button>
    </aside>

    <!-- CHAT -->
    <main class="chat-area">
        <div class="chat-header" id="chat-header">
            <div class="mode-info">
                <img src="avatar.png" alt="Mode Avatar" class="mode-avatar" id="mode-avatar">
                <div>
                    <h2 id="mode-title">Ayya mode</h2>
                    <p id="mode-desc">කියන්න මචන්</p>
                </div>
            </div>
            <div class="toggle-switch">
                <label class="switch">
                    <input type="checkbox" id="toggle-mode">
                    <span class="slider">
              <div class="avatar-thumb">
                <img
                        src="../../assests/ayya_chat_ui_upper.png"
                        id="toggle-icon"
                        alt="Toggle Avatar"
                >
              </div>
            </span>
                </label>
            </div>
        </div>

        <div class="chat-messages" id="chat-messages">
            <div class="bot-message" id="bot-message">
                Machan, what's on your mind today?
            </div>
        </div>

        <div class="chat-input">
            <input
                    type="text"
                    id="user-input"
                    placeholder="Type a message…"
            >
            <button class="send-btn" id="send-btn">➔</button>
        </div>
    </main>
</div>

<!-- OVERLAY -->
<div class="overlay" id="overlay"></div>

<script src="../../scripts/chat_ui/chat_ui.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', () => {
        const sidebar = document.getElementById('sidebar');
        const openBtn = document.getElementById('mobile-menu-button');
        const closeBtn = document.getElementById('sidebar-close');
        const overlay = document.getElementById('overlay');

        openBtn.addEventListener('click', () => {
            sidebar.classList.add('active');
            overlay.classList.add('active');
        });
        closeBtn.addEventListener('click', () => {
            sidebar.classList.remove('active');
            overlay.classList.remove('active');
        });
        overlay.addEventListener('click', () => {
            sidebar.classList.remove('active');
            overlay.classList.remove('active');
        });
    });
</script>
</body>
</html>
